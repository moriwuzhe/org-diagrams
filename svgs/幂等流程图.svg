<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1697px" height="1482px" viewBox="-0.5 -0.5 1697 1482" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2020-10-10T08:13:13.382Z&quot; agent=&quot;5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.87 Safari/537.36&quot; etag=&quot;PoyS--uv6z2VAvPYmrjl&quot; version=&quot;13.7.9&quot; type=&quot;github&quot;&gt;&lt;diagram name=&quot;幂等&quot; id=&quot;74e2e168-ea6b-b213-b513-2b3c1d86103e&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" resource="https://app.diagrams.net/#Hmoriwuzhe%2Forg-diagrams%2Fmain%2Fsvgs%2F%E5%B9%82%E7%AD%89%E6%B5%81%E7%A8%8B%E5%9B%BE.svg" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 266 31 L 266 14.5 Q 266 1 252.5 1 L 29.5 1 Q 16 1 16 14.5 L 16 31" fill="#ffffff" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 16 31 L 16 177.5 Q 16 191 29.5 191 L 252.5 191 Q 266 191 266 177.5 L 266 31" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 16 31 L 266 31" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="14px"><text x="140.5" y="21.5">IdempotentProperties(配置类)</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" font-size="12px"><text x="21.5" y="48.5">business: 业务ID</text><text x="21.5" y="62.5">key: 同业务唯一标识(配合business,全局唯一)</text><text x="21.5" y="76.5">persistence: 是否持久化到DB</text><text x="21.5" y="90.5">persistenceExpireTime: 持久化过期时间</text><text x="21.5" y="104.5">cacheExpireTime: 过期时间</text><text x="21.5" y="118.5">timeUnit: 时间单位</text></g><path d="M 266 284 L 266 267.5 Q 266 254 252.5 254 L 29.5 254 Q 16 254 16 267.5 L 16 284" fill="#ffffff" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 16 284 L 16 425.5 Q 16 439 29.5 439 L 252.5 439 Q 266 439 266 425.5 L 266 284" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 16 284 L 266 284" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="14px"><text x="140.5" y="274.5">@Idempotent(注解类)</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" font-size="12px"><text x="21.5" y="301.5">business: 业务ID</text><text x="21.5" y="315.5">key: 同业务唯一标识(配合business,全局唯一)</text><text x="21.5" y="329.5">persistence: 是否持久化到DB</text><text x="21.5" y="343.5">persistenceExpireTime: 持久化过期时间</text><text x="21.5" y="357.5">cacheExpireTime: 过期时间</text><text x="21.5" y="371.5">timeUnit: 时间单位</text><text x="21.5" y="385.5">successCallback: 成功回调方法</text><text x="21.5" y="399.5">failCallback : 失败回调方法</text></g><path d="M 276 531 L 276 514.5 Q 276 501 262.5 501 L 14.5 501 Q 1 501 1 514.5 L 1 531" fill="#ffffff" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 1 531 L 1 1027.5 Q 1 1041 14.5 1041 L 262.5 1041 Q 276 1041 276 1027.5 L 276 531" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 1 531 L 276 531" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="14px"><text x="138" y="521.5">Idempotent(接口类)</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" font-size="12px"><text x="6.5" y="548.5">// 全部参数</text><text x="6.5" y="562.5">execute(</text><text x="6.5" y="576.5">String business, 业务ID</text><text x="6.5" y="590.5">String key,  同业务唯一标识</text><text x="6.5" y="604.5">int cacheExpireTime, 缓存失效时间</text><text x="6.5" y="618.5">boolean persistence, 是否持久化到DB</text><text x="6.5" y="632.5">int persistenceExpireTime,   DB过期时间</text><text x="6.5" y="646.5">TimeUnit timeUnit, 时间单位</text><text x="6.5" y="660.5">Supplier&lt;T&gt; successCallback, 成功回调</text><text x="6.5" y="674.5">Supplier&lt;T&gt; failCallback 失败回调</text><text x="6.5" y="688.5">)</text><text x="6.5" y="716.5">// 不需要持久化</text><text x="6.5" y="730.5">execute(</text><text x="6.5" y="744.5">String business, 业务ID</text><text x="6.5" y="758.5">String key,  同业务唯一标识</text><text x="6.5" y="772.5">int expireTime, 缓存失效时间</text><text x="6.5" y="786.5">TimeUnit timeUnit, 时间单位</text><text x="6.5" y="800.5">Supplier&lt;T&gt; successCallback, 成功回调</text><text x="6.5" y="814.5">Supplier&lt;T&gt; failCallback 失败回调</text><text x="6.5" y="828.5">)</text><text x="6.5" y="856.5">// 不需要失败回调</text><text x="6.5" y="870.5">execute(</text><text x="6.5" y="884.5">String business, 业务ID</text><text x="6.5" y="898.5">String key,  同业务唯一标识</text><text x="6.5" y="912.5">int expireTime, 缓存失效时间</text><text x="6.5" y="926.5">boolean persistence, 是否持久化到DB</text><text x="6.5" y="940.5">int persistenceExpireTime,   DB过期时间</text><text x="6.5" y="954.5">TimeUnit timeUnit, 时间单位</text><text x="6.5" y="968.5">Supplier&lt;T&gt; successCallback 成功回调</text><text x="6.5" y="982.5">)</text></g><ellipse cx="346" cy="6" rx="5" ry="5" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 346 11 L 346 27.67 M 346 14.33 L 336 14.33 M 346 14.33 L 356 14.33 M 346 27.67 L 336 41 M 346 27.67 L 356 41" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 346 41 L 346 1481" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><rect x="341" y="471" width="10" height="61" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="341" y="1041" width="10" height="60" fill="#ffffff" stroke="#000000" pointer-events="none"/><ellipse cx="536" cy="21" rx="30" ry="20" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 513.5 41 L 558.5 41" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 536 41 L 536 1481" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><rect x="531" y="61" width="10" height="40" fill="#ffffff" stroke="#000000" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="535.5" y="25.5">通用切面</text></g><rect x="531" y="121" width="10" height="29" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="531" y="351" width="10" height="54" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="531" y="511" width="10" height="40" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="531" y="631" width="10" height="40" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="531" y="721" width="10" height="40" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="531" y="905" width="10" height="40" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 536.99 760.88 L 696 760.9 L 696 905 L 549.12 905" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 542.12 905 L 549.12 901.5 L 549.12 908.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 834px; margin-left: 660px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; "><span style="font-size: 12px ; text-align: center ; background-color: rgb(248 , 249 , 250)">持久化</span></div></div></div></foreignObject><text x="660" y="837" fill="#000000" font-family="Helvetica" font-size="11px">持久化</text></switch></g><rect x="531" y="983" width="10" height="40" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="531" y="251" width="10" height="40" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="531" y="828" width="10" height="40" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 540 274.32 Q 586 274.3 586 326.3 Q 586 378.3 548.37 378.32" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 543.12 378.32 L 550.12 374.82 L 548.37 378.32 L 550.12 381.82 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 295px; margin-left: 588px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">持久化</div></div></div></foreignObject><text x="588" y="298" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">持久化</text></switch></g><path d="M 537 271 Q 956 271 956 436 Q 956 601 746.65 601 Q 537.3 601 537.32 623.56" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 537.33 630.56 L 533.82 623.57 L 540.82 623.56 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 451px; margin-left: 960px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">不持久化</div></div></div></foreignObject><text x="960" y="454" fill="#000000" font-family="Helvetica" font-size="11px">不持久化</text></switch></g><path d="M 349.5 61 L 357.75 61 Q 366 61 376 61 L 522.88 61" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><ellipse cx="345.5" cy="61" rx="4" ry="4" fill="#000000" stroke="#000000" pointer-events="none"/><path d="M 529.88 61 L 522.88 64.5 L 522.88 57.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 58px; margin-left: 439px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">发送短信</div></div></div></foreignObject><text x="439" y="58" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">发送短信</text></switch></g><ellipse cx="706" cy="21" rx="30" ry="20" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 683.5 41 L 728.5 41" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 706 41 L 706 1481" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="705.5" y="25.5">缓存</text></g><rect x="701" y="91" width="10" height="40" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="701" y="681" width="10" height="40" fill="#ffffff" stroke="#000000" pointer-events="none"/><ellipse cx="876" cy="21" rx="30" ry="20" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 853.5 41 L 898.5 41" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 876 41 L 876 1481" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="875.5" y="25.5">DB</text></g><rect x="871" y="411" width="10" height="40" fill="#ffffff" stroke="#000000" pointer-events="none"/><rect x="871" y="925" width="10" height="80" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 546 91 L 541 91 Q 536 91 546 91 L 692.88 91" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 699.88 91 L 692.88 94.5 L 692.88 87.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 88px; margin-left: 614px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">查询缓存</div></div></div></foreignObject><text x="614" y="88" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">查询缓存</text></switch></g><path d="M 701 129 L 543.24 129" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 551.12 124.5 L 542.12 129 L 551.12 133.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 126px; margin-left: 621px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">有key</div></div></div></foreignObject><text x="621" y="126" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">有key</text></switch></g><path d="M 536 151 Q 456 151 456 296 Q 456 441 401 441 Q 346 441 346 468.76" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 341.5 460.88 L 346 469.88 L 350.5 460.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 323px; margin-left: 456px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">调用fail callback</div></div></div></foreignObject><text x="456" y="323" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">调用fail callback</text></switch></g><path d="M 704.8 132.52 Q 536 132.5 536 248.76" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 531.5 240.88 L 536 249.88 L 540.5 240.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 223px; margin-left: 586px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">无key</div></div></div></foreignObject><text x="586" y="223" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">无key</text></switch></g><path d="M 542 380 Q 542 391 710 391 Q 878 391 878 406.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 878 411.88 L 874.5 404.88 L 878 406.63 L 881.5 404.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 391px; margin-left: 657px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">查询数据库</div></div></div></foreignObject><text x="657" y="394" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">查询数据库</text></switch></g><path d="M 874.92 452.68 Q 874.9 491 705.45 491 Q 536 491 536 508.08" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 531.5 500.2 L 536 509.2 L 540.5 500.2" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 488px; margin-left: 715px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">有记录</div></div></div></foreignObject><text x="715" y="488" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">有记录</text></switch></g><path d="M 531 531 Q 441 531 441 516.25 Q 441 501.5 353.24 501.5" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 361.12 497 L 352.12 501.5 L 361.12 506" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 513px; margin-left: 441px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">调用fail callback</div></div></div></foreignObject><text x="441" y="513" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">调用fail callback</text></switch></g><path d="M 874.92 451.32 Q 874.9 541 705.45 541 Q 536 541 536 628.76" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 531.5 620.88 L 536 629.88 L 540.5 620.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 538px; margin-left: 706px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">无记录</div></div></div></foreignObject><text x="706" y="538" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">无记录</text></switch></g><path d="M 542.67 652.32 Q 705.3 652.3 705.32 672.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 705.33 679.88 L 701.82 672.89 L 708.82 672.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 649px; margin-left: 639px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">记录缓存</div></div></div></foreignObject><text x="639" y="649" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">记录缓存</text></switch></g><path d="M 701 719 L 543.24 720.97" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 551.06 716.37 L 542.12 720.99 L 551.17 725.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 541 925 L 862.88 925" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 869.88 925 L 862.88 928.5 L 862.88 921.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 922px; margin-left: 706px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">记录数据库</div></div></div></foreignObject><text x="706" y="922" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">记录数据库</text></switch></g><path d="M 871 1001 L 542.91 1003.82" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 550.75 999.25 L 541.79 1003.83 L 550.83 1008.25" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1126 1 L 1682 1 L 1696 15 L 1696 571 L 1126 571 L 1126 1 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1682 1 L 1682 15 L 1696 15" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 568px; height: 1px; padding-top: 2px; margin-left: 1128px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div><div><br /></div><div>幂等:</div><div><br /></div><div>1. 查询缓存:</div></div><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>-&gt; key: idempotent_{business}_{key}_lock</div></div></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>a. 存在(已经处理过): </div></div></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>返回失败, 调用fail callback</div></div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>b. 不存在:</div></div></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>继续</div></div></blockquote></blockquote><div><div>2. 判断是否过期</div></div><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>-&gt; 请求时间与当前时间差值大于缓存时间 ,则过期</div></div><div><div>a. 过期:</div></div></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>-&gt; 判断过期情况: </div><div>@ 【持久化】 并且 数据库中【无记录】的数据才任务未处理过</div></div><div>@ 【不持久化】再次处理</div></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>是否持久化：</div></div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>i. 不持久化:</div></div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px">继续b(未过期)操作<br /></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>ii. 持久化:</div></div></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>一. 有记录:</div></div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>1. 记录的状态为成功:</div></div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>返回失败, 调用fail callback</div></div></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>2. 记录的状态为失败</div></div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>A. 更新状态为成功</div></div></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>B. 执行业务</div></div></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>C. 业务执行失败,更新状态为失败</div></div></blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>二. 无记录:</div></div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>继续b(未过期)操作</div></div></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>b. 未过期:</div></div></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>-&gt; 生成记录</div></div></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>i. 记录缓存</div></div></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>ii. 是否记录数据库</div></div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>一. 不记录</div></div></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>返回成功, 调用success callback(发送操作)</div></div></blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>二. 记录</div></div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>1. 数据库插入, 默认状态成功</div></div></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>2. 执行业务</div></div></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><blockquote style="margin: 0 0 0 40px ; border: none ; padding: 0px"><div><div>3. 业务执行失败,更新状态为失败</div></div></blockquote></blockquote></blockquote></blockquote><div><span>   </span></div></div></div></div></foreignObject><text x="1128" y="14" fill="#000000" font-family="Helvetica" font-size="12px">幂等:...</text></switch></g><path d="M 528 849.32 Q 528 859 437 859 Q 346 859 346 1038.76" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 341.5 1030.88 L 346 1039.88 L 350.5 1030.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 846px; margin-left: 362px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">成功回调</div></div></div></foreignObject><text x="362" y="846" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">成功回调</text></switch></g><path d="M 531 1003 Q 346 1003 346 1038.76" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 341.5 1030.88 L 346 1039.88 L 350.5 1030.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1000px; margin-left: 419px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">成功回调</div></div></div></foreignObject><text x="419" y="1000" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">成功回调</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 801px; margin-left: 466px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">不持久化</div></div></div></foreignObject><text x="466" y="805" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">不持久化</text></switch></g><path d="M 490.07 811 L 525.12 825.56" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 529.97 827.57 L 522.16 828.12 L 525.12 825.56 L 524.85 821.65 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 531 761 L 483.22 787.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 478.64 790.45 L 483.03 783.97 L 483.22 787.88 L 486.46 790.07 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>